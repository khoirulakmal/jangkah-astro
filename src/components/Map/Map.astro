---
import Post from '../Post/Post.astro';
---

<section id="map-section" class="flex flex-col lg:flex-row mx-2 md:mx-16 items-center">
    <div id="post" class="flex flex-col my-10 lg:my-20 group/post peer/post outline outline-2 outline-brown md:w-full md:h-full lg:w-1/3 lg:h-72 lg:hover:w-full lg:hover:h-full lg:hover:my-2 overflow-clip shadow-[0_4px_5px_0px_rgba(#693305)] shadow-brown border border-brown">
        <div id="postCategory" class="flex flex-row bg-brown font-raleway font-bold text-lg md:text-sm lg:text-sm text-[#D9D9D9] text-center lg:px-5 px-10 py-2">
            <h2 class="group transition mx-auto">
                <a href="#terbaru" id="terbaru">Terbaru</a>
            <span class="block max-w-0 group-hover:max-w-full transition-all duration-1000 h-0.5 bg-white"></span>
            </h2>
            <h2 class="group transition mx-auto">
                <a href="#terpopuler" id="terpopuler">Terpopuler</a>
            <span class="block max-w-0 group-hover:max-w-full transition-all duration-1000 h-0.5 bg-white"></span>
            </h2>
        </div>
        <div class="flex flex-row">
        <div id="postTerbaru" class="flex flex-col mt-5 px-10 md:px-5 divide-y-2 divide-dotted divide-brown">
                <Post title={'Kritik Poerbatjaraka atas Suntingan Kakawin Ramayana Karya H.Kern'} author={'Tio Cahya Sadewa'} />
                <Post title={'Naskah Merapi-Merbabu dalam Jaringan Skriptorium'} author={'Naufal Mahdi'} />
                <Post title={'Manurung: Jarak antara Bangsawan dan Budak adalah Puisi'} author={'Penulis Anonim'} />
                <Post title={'Kritik Poerbatjaraka atas Suntingan Kakawin Ramayana Karya H.Kern'} author={'Tio Cahya Sadewa'} />
                <Post title={'Naskah Merapi-Merbabu dalam Jaringan Skriptorium'} author={'Naufal Mahdi'} />
                <Post title={'Manurung: Jarak antara Bangsawan dan Budak adalah Puisi'} author={'Penulis Anonim'} />
            </div>
            <div id="postTerpopuler" class="hidden lg:hidden lg:group-hover/post:flex flex-col mt-5 px-10 md:px-5 divide-y-2 divide-dotted divide-brown">
                <Post title={'Lorem Ipsum Dolor sit amet'} author={'Tio Cahya Sadewa'} />
                <Post title={'Lorem Ipsum Dolor sit amet'} author={'Naufal Mahdi'} />
                <Post title={'Lorem Ipsum Dolor sit amet'} author={'Penulis Anonim'} />
                <Post title={'Kritik Poerbatjaraka atas Suntingan Kakawin Ramayana Karya H.Kern'} author={'Tio Cahya Sadewa'} />
                <Post title={'Naskah Merapi-Merbabu dalam Jaringan Skriptorium'} author={'Naufal Mahdi'} />
                <Post title={'Manurung: Jarak antara Bangsawan dan Budak adalah Puisi'} author={'Penulis Anonim'} />
            </div>
        </div>
    </div>
    <div id="mapContainer" class="w-full lg:w-2/3 lg:mx-5 self-stretch duration-1000 ease-in shrink flex
    lg:peer-hover/post:w-1/3
    lg:peer-hover/post:h-52
    xl:peer-hover/post:h-64 
    lg:peer-hover/post:self-center"
    >
    <div id="map" class="w-full h-64 lg:h-full self-center shadow-[0_4px_5px_0px_rgba(#693305)] shadow-brown border border-brown z-10"></div>
    </div>
        <div id="diskusi" class="flex flex-col md:flex-row my-10 lg:my-20 md:w-full lg:w-1/3 md:h-1/3 group/diskusi hover:w-full hover:h-full shadow-[0_4px_5px_0px_rgba(#693305)] shadow-brown border border-brown">
            <div class="order-2 lg:order-none hidden md:group-hover/diskusi:flex flex-col m-6 space-y-3">
                <h1 class="text-xl text-brown text-raleway">Diskusi Rutin #99</h1>
                <article class="text-lg md:text-sm">
                    Naskah kuno yang dituliskan oleh leluhur-leluhur kita memuat banyak ajaran atau piwulang luhur yang dapat kita pelajari. Piwulang yang banyak terekam dalam naskah kuno di antaranya adalah piwulang tentang wanita.
                </article>
                <span class="space-x-2 text-brown"><a href="#" class="hover:underline duration-500">Lihat Rekaman</a> <a href="#" class="hover:underline">Baca Pengantar</a></span>
            </div>
            <img class="w-full h-full md:w-1/2 lg:w-full lg:group-hover/diskusi:w-4/6 lg:group-hover/diskusi:object-contain xl:group-hover/diskusi:w-3/5 lg:group-hover/diskusi:my-auto" src="https://jangkah.id/wp-content/uploads/2021/03/JAGONGAN-NASKAH-38-012-768x768.jpg.webp"></img>
        </div>
    </section>

<script>
var map = L.map('map').setView([-7.80107,110.37584], 13);
L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="#">Jangkah</a>'
}).addTo(map);
var marker = L.marker([-7.80149,110.37572]).addTo(map);
marker.bindPopup("<h1>Naskah Jangkah</h1><br> Lorem Ipsum").openPopup();
marker._icon.classList.add("text-brown");
var marker2 = L.marker([-7.80397,110.36349]).addTo(map);
marker2.bindPopup("<h1>Skrip</h1><br> Lorem Ipsum").openPopup();
marker2._icon.classList.add("text-brown");
</script>

<script>
    const post = document.querySelector("#post");
    const postCategory = document.querySelector("#postCategory");
    const map = document.querySelector("#mapContainer");
    const diskusi = document.querySelector("#diskusi");
    const laptop = window.matchMedia("(min-width: 1024px)");
    const tablet = window.matchMedia("(max-width: 768px)");
    const linkTerbaru = document.querySelector("#terbaru");
    const linkTerpopuler = document.querySelector("#terpopuler");
    const postTerbaru = document.querySelector("#postTerbaru");
    const postTerpopuler = document.querySelector("#postTerpopuler");
    if (laptop.matches) {
        diskusi.addEventListener("mouseenter", shrinkAll);
        diskusi.addEventListener("mouseleave", shrinkAllReverse);
    }
    if (tablet.matches){
        linkTerbaru.addEventListener("click", showTerbaru);
        linkTerpopuler.addEventListener("click", showPopuler);
    }
    function shrinkAll() {
        map.classList.add("xl:h-72", "lg:h-64", "lg:w-1/3", "self-center", "my-auto");
        map.classList.remove("self-stretch", "w-full", "lg:w-2/3");
        postCategory.classList.add("xl:text-xs");
        postCategory.classList.remove("xl:text-xl");
    }
    function shrinkAllReverse() {
        map.classList.remove("xl:h-72", "lg:h-64", "lg:w-1/3", "self-center", "my-auto");
        map.classList.add("self-stretch", "w-full", "lg:w-2/3");
        postCategory.classList.remove("xl:text-xs");
        postCategory.classList.add("xl:text-xl");
    }
    function showPopuler(){
        postTerpopuler.classList.remove("hidden");
        postTerpopuler.classList.add("flex");
        postTerbaru.classList.add("hidden");
        postTerbaru.classList.remove("flex");
    }
    function showTerbaru(){
        postTerbaru.classList.remove("hidden");
        postTerbaru.classList.add("flex");
        postTerpopuler.classList.add("hidden");
        postTerpopuler.classList.remove("flex");
    }
</script>